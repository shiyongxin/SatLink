<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Public Gallery - SatLink</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">SatLink</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/dashboard">Dashboard</a>
                <a class="nav-link" href="/calculate">Calculate</a>
                <a class="nav-link" href="/calculations">Calculations</a>
                <a class="nav-link" href="/manage">Manage</a>
                <a class="nav-link active" href="/public">Public</a>
                <a class="nav-link" href="/profile">Profile</a>
                <a class="nav-link" href="/logout">Logout</a>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <h1>Public Gallery</h1>
        <p class="text-muted">Browse components and calculations shared by the community</p>

        <!-- Tabs -->
        <ul class="nav nav-tabs mt-4" id="publicTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="calculations-tab" data-bs-toggle="tab" data-bs-target="#calculations" type="button">
                    Calculations
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="satellites-tab" data-bs-toggle="tab" data-bs-target="#satellites" type="button">
                    Satellites
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="transponders-tab" data-bs-toggle="tab" data-bs-target="#transponders" type="button">
                    Transponders
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="carriers-tab" data-bs-toggle="tab" data-bs-target="#carriers" type="button">
                    Carriers
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="groundstations-tab" data-bs-toggle="tab" data-bs-target="#groundstations" type="button">
                    Ground Stations
                </button>
            </li>
        </ul>

        <div class="tab-content mt-3" id="publicTabsContent">
            <!-- Calculations Tab -->
            <div class="tab-pane fade show active" id="calculations" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h5>Shared Calculations</h5>
                    </div>
                    <div class="card-body">
                        {% if calculations %}
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Date</th>
                                            <th>Elevation</th>
                                            <th>C/N0</th>
                                            <th>Availability</th>
                                            <th>Owner</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for calc in calculations %}
                                            <tr>
                                                <td><a href="/calculations/{{ calc.id }}">{{ calc.name }}</a></td>
                                                <td>{{ calc.calculation_date }}</td>
                                                <td>{{ "%.1f"|format(calc.elevation_angle) }}°</td>
                                                <td>{{ "%.1f"|format(calc.cn0) }} dB-Hz</td>
                                                <td>{{ "%.1f"|format(calc.availability) }}%</td>
                                                <td>{{ calc.owner }}</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <p class="text-muted">No public calculations available.</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Satellites Tab -->
            <div class="tab-pane fade" id="satellites" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h5>Shared Satellites</h5>
                    </div>
                    <div class="card-body">
                        {% if satellites %}
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Longitude</th>
                                            <th>Latitude</th>
                                            <th>Altitude (km)</th>
                                            <th>Owner</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for sat in satellites %}
                                            <tr>
                                                <td>{{ sat.name }}</td>
                                                <td>{{ sat.sat_long }}°</td>
                                                <td>{{ sat.sat_lat }}°</td>
                                                <td>{{ sat.h_sat }}</td>
                                                <td>{{ sat.owner }}</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <p class="text-muted">No public satellites available.</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Transponders Tab -->
            <div class="tab-pane fade" id="transponders" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h5>Shared Transponders</h5>
                    </div>
                    <div class="card-body">
                        {% if transponders %}
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Frequency (GHz)</th>
                                            <th>EIRP (dBW)</th>
                                            <th>Bandwidth (MHz)</th>
                                            <th>Polarization</th>
                                            <th>Owner</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for tp in transponders %}
                                            <tr>
                                                <td>{{ tp.name }}</td>
                                                <td>{{ tp.freq }}</td>
                                                <td>{{ tp.eirp_max }}</td>
                                                <td>{{ tp.b_transp }}</td>
                                                <td>{{ tp.polarization }}</td>
                                                <td>{{ tp.owner }}</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <p class="text-muted">No public transponders available.</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Carriers Tab -->
            <div class="tab-pane fade" id="carriers" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h5>Shared Carriers</h5>
                    </div>
                    <div class="card-body">
                        {% if carriers %}
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>MODCOD</th>
                                            <th>Modulation</th>
                                            <th>FEC</th>
                                            <th>Bandwidth (MHz)</th>
                                            <th>Owner</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for car in carriers %}
                                            <tr>
                                                <td>{{ car.name }}</td>
                                                <td>{{ car.modcod }}</td>
                                                <td>{{ car.modulation }}</td>
                                                <td>{{ car.fec }}</td>
                                                <td>{{ car.b_util }}</td>
                                                <td>{{ car.owner }}</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <p class="text-muted">No public carriers available.</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Ground Stations Tab -->
            <div class="tab-pane fade" id="groundstations" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h5>Shared Ground Stations</h5>
                    </div>
                    <div class="card-body">
                        {% if ground_stations %}
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Latitude</th>
                                            <th>Longitude</th>
                                            <th>Altitude (m)</th>
                                            <th>City</th>
                                            <th>Country</th>
                                            <th>Owner</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for gs in ground_stations %}
                                            <tr>
                                                <td>{{ gs.name }}</td>
                                                <td>{{ gs.site_lat }}°</td>
                                                <td>{{ gs.site_long }}°</td>
                                                <td>{{ gs.altitude }}</td>
                                                <td>{{ gs.city }}</td>
                                                <td>{{ gs.country }}</td>
                                                <td>{{ gs.owner }}</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <p class="text-muted">No public ground stations available.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
